<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Dice Python Frontend Documentation: Python Developer Documentation Main Page</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Dice Python Frontend Documentation
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('index.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Python Developer Documentation Main Page </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="md_repo_PYTHON_MAINPAGE"></a> <img src="https://i.imgur.com/FXzNrNN.png" alt="" class="inline"/></p>
<p>This is the homepage for the Developer Documentation of the Python frontend of <em>Dice</em>, <em>DicePy</em>. On this site, you will find definitions for all of the functions that we use in the Input Generator and Visualisation sections of <em>DicePy</em>, as well as instructions for integrating support for a new problem into the code (see below).</p>
<h2>Links</h2>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Destination   </th><th class="markdownTableHeadNone">Link    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">GitHub   </td><td class="markdownTableBodyNone"><a href="https://github.com/HetSys/PX915_2021_A">Here</a>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Dev Documentation Main   </td><td class="markdownTableBodyNone"><a href="https://joegilkes.github.io/PX915-Docs/">Here</a>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Fortran Dev Documentation   </td><td class="markdownTableBodyNone"><a href="https://joegilkes.github.io/PX915-Docs/fortran/docs/index.html">Here</a>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Python Dev Documentation   </td><td class="markdownTableBodyNone">You are here   </td></tr>
</table>
<hr  />
<h2>Adding a new problem to Dice QMC</h2>
<p>There are two main components to <em>DicePy</em>: the Input Generator and the Visualisation library. We will handle these sections separately.</p>
<h3>Input Generator</h3>
<p>The Input Generator <code><a class="el" href="namespace_dice_py_1_1dice__inputs.html" title="Contains main routine that handles the input file params.txt for Dice.">DicePy.dice_inputs</a></code> incorporates three other modules:</p>
<ul>
<li><code><a class="el" href="namespace_dice_py_1_1dice__defaults.html" title="Contains default values for input parameters of Dice QMC.">DicePy.dice_defaults</a></code> lists the default variables needed throughout the Input Generator, made to match the defaults in the Fortran backend code.</li>
<li><code><a class="el" href="namespace_dice_py_1_1dice__check.html" title="Contains functions that check the input file params.txt for Dice QMC.">DicePy.dice_check</a></code> is used to check existing <em>params.txt</em> files for any errors, to prevent further errors when running the Fortran backend code.</li>
<li><code><a class="el" href="namespace_dice_py_1_1dice__write.html" title="Contains functions that write the input file params.txt for Dice QMC.">DicePy.dice_write</a></code> is used to write new <em>params.txt</em> files, which are made by the Input Generator</li>
</ul>
<h4><code><a class="el" href="namespace_dice_py_1_1dice__defaults.html" title="Contains default values for input parameters of Dice QMC.">DicePy.dice_defaults</a></code></h4>
<p>Implementation of a new problem into <code><a class="el" href="namespace_dice_py_1_1dice__defaults.html" title="Contains default values for input parameters of Dice QMC.">DicePy.dice_defaults</a></code> is perhaps the simplest of the three. Aside from implementing the new system into the <code>systems</code> list at the top of the module, the user will need to extend the lists for the globally shared parameters such as <code>d_vqmc_steps</code> and <code>d_sigma</code>, and add in new variables for problem-specific parameters such as in the <code>Parameters for QHO</code> and the <code>Parameters for H2plus</code> sections.</p>
<p>The user will also need to add in a new <code>porder</code> list. These lists specify the order that parameter tags should be iterated through when checking an input file, in order to be consistent with files made by the Input Generator.</p>
<h4><code><a class="el" href="namespace_dice_py_1_1dice__check.html" title="Contains functions that check the input file params.txt for Dice QMC.">DicePy.dice_check</a></code></h4>
<p><code><a class="el" href="namespace_dice_py_1_1dice__check.html" title="Contains functions that check the input file params.txt for Dice QMC.">DicePy.dice_check</a></code> makes use of a number of inner checking routines to ensure that values in a user's <em>params.txt</em> are valid. When adding a new problem these do not need to be changed, but they will still be utilised within the <code>check_inputs</code> function. Most of this function can remain the same, but there are a couple of problem-specific sections that will need to be added to.</p>
<p>The first section starts from the comment <code># Check p_system of PARAMETERS namelist</code>. This section checks for the presence of the PARAMETERS namelist, and populates it if it is found to be empty. A <code>elif p_system=="your_system":</code> section will need to be added to the end here that automatically populates the PARAMETERS namelist with the values you just defined in <code><a class="el" href="namespace_dice_py_1_1dice__defaults.html" title="Contains default values for input parameters of Dice QMC.">DicePy.dice_defaults</a></code>.</p>
<p>The second section also requires a similar extension to an existing <code>elif</code> statement, which checks through the system-specific variables supplied in the user's <em>params.txt</em> and determines if they are of the correct type (boolean, float, etc.) using the aforementioned inner checking routines. Of note here are:</p>
<ul>
<li><code><a class="el" href="namespacerepo_1_1_dice_py_1_1dice__check.html#a1a1f6c0cd51ea74a13b5dd0f42293fdb" title="Checks the validity of the input value given for a tag present in params.txt.">isvalid()</a></code>, which checks if a given <code>tag</code>'s <code>values</code> match one of the expected <code>options</code> from a predefined list.</li>
<li><code><a class="el" href="namespacerepo_1_1_dice_py_1_1dice__check.html#a11e1a939a780b57bc6fbf04e7d491319" title="Checks the input value of a parameter that is expected to be a float.">check_float()</a></code>, which checks if a given <code>tag</code>'s value(s) are floats, and replaces them with the <code>tag</code>'s default values if not.</li>
<li><code><a class="el" href="namespacerepo_1_1_dice_py_1_1dice__check.html#ae8ec810c9210b7d47ba15ca0120f8bf9" title="Checks the input values for a grid parameter.">check_grid()</a></code>, which does the same as above but for a grid-type parameter, ie. a <code>(start, stop, num)</code> set of numbers to run a linear spacing function on, similar to numpy's <code>linspace</code>.</li>
</ul>
<h4><code><a class="el" href="namespace_dice_py_1_1dice__write.html" title="Contains functions that write the input file params.txt for Dice QMC.">DicePy.dice_write</a></code></h4>
<p><code><a class="el" href="namespace_dice_py_1_1dice__write.html" title="Contains functions that write the input file params.txt for Dice QMC.">DicePy.dice_write</a></code> makes use of a similar set of checking functions to the above, but also contains a set of querying functions. These prompt the user for a response in a variety of places throughout the Input Generator, and are made to be extensible to new problems being added. Of note here are:</p>
<ul>
<li><code><a class="el" href="namespacerepo_1_1_dice_py_1_1dice__write.html#a8cad57db1ad2bd410b5e2824fe941527" title="Checks if the input string represents an integer.">isint()</a></code> and <code><a class="el" href="namespacerepo_1_1_dice_py_1_1dice__write.html#a091651cb5a2344490852ec428f3749ad" title="Checks if the input string represents a float.">isfloat()</a></code>, which check if the string <code>s</code> that they are passed is an integer or a float, respectively. These are used consistently throughout the writer to ensure that the user is providing the correct kind of input and not, for example, passing a float to the variable for the total number of VQMC steps, which should always be an integer.</li>
<li><code><a class="el" href="namespacerepo_1_1_dice_py_1_1dice__write.html#a3972bcfd8df2c98c95bc85c8a2aec2d0" title="Queries whether the user wants to use default values for a certain parameter.">query_default()</a></code>, which queries if a user wishes to use the <code>default</code> value for a <code>param</code>, as described in <code><a class="el" href="namespace_dice_py_1_1dice__defaults.html" title="Contains default values for input parameters of Dice QMC.">DicePy.dice_defaults</a></code>.</li>
<li><code><a class="el" href="namespacerepo_1_1_dice_py_1_1dice__write.html#a706c67c9391b763fb7c9deae9158b5fc" title="Queries an integer step value, using the input string as a prompt.">query_step()</a></code>, which asks the user for a positive integer ie. a 'step' value, and <code><a class="el" href="namespacerepo_1_1_dice_py_1_1dice__write.html#a5dab30aeb8324ffdb7ec7ce89d003816" title="Queries a positive float value, using the input string as a prompt.">query_posfloat()</a></code>, which does the same for positive floats.</li>
<li><code><a class="el" href="namespacerepo_1_1_dice_py_1_1dice__write.html#a13116dbc4dc779603cb469334a304f1d" title="Queries user for the minimum, maximum and number of points of a parameter grid.">query_grid()</a></code>, which constructs a <code>(start, stop, num)</code> grid to be linearly spaced once in the Fortran backend, while checking that values in the grid are of the correct type to avoid errors.</li>
</ul>
<p>The majority of the module is located in the <code><a class="el" href="namespacerepo_1_1_dice_py_1_1dice__write.html#ad98a8932dcff38aeae7a609bab6f0897" title="Major function that queries the user for all the inputs required to assemble params....">query_params()</a></code> function, which runs the user through the entirety of input generation using the above routines. Much of this function is not specific to a new problem and can be left as-is, but there are sections that check the value of the <code>sys</code> variable that will need to be constructed for a new problem. These might take a form similar to the following:</p>
<div class="fragment"><div class="line"># my_new_problem</div>
<div class="line">elif sys==&#39;f&#39;:</div>
<div class="line"> </div>
<div class="line">    # Query method of solving new problem</div>
<div class="line">    tag = &#39;solve_method&#39;</div>
<div class="line">    print(&#39;&#39;)</div>
<div class="line">    print(&#39;Which method would you like to use for solving my_new_problem?&#39;)</div>
<div class="line">    print(&#39;a) Method 1&#39;)</div>
<div class="line">    print(&#39;b) Method 2&#39;)</div>
<div class="line">    response = input(&#39;Your response (&quot;a&quot; or &quot;b&quot;): &#39;)</div>
<div class="line">    # Check response</div>
<div class="line">    options = [&#39;a&#39;,&#39;b&#39;]</div>
<div class="line">    while not (response in options):</div>
<div class="line">        print(&#39;Error: Invalid response, please enter &quot;a&quot; or &quot;b&quot;, without quotes.&#39;)</div>
<div class="line">        response = input(&#39;Your response: &#39;)</div>
<div class="line">    # Record response</div>
<div class="line">    settings = [&#39;.TRUE.&#39;,&#39;.FALSE.&#39;]</div>
<div class="line">    params[tag] = settings[options.index(response)]</div>
<div class="line"> </div>
<div class="line">    # Parameter information - my_new_param</div>
<div class="line">    print(&#39;&#39;)</div>
<div class="line">    print(&#39;Parameter &quot;my_new param&quot; is a very cool.&#39;)</div>
<div class="line">    print(&#39;&#39;)</div>
<div class="line"> </div>
<div class="line">    if auto==&#39;a&#39;:</div>
<div class="line"> </div>
<div class="line">        # Query start value parameter my_new_param</div>
<div class="line">        tag=&#39;my_new_param&#39;</div>
<div class="line">        prompt=&#39;Enter starting guess value for my_new_param.</div>
<div class="line">        temp = query_posfloat(prompt,tag,d_c)</div>
<div class="line">        if temp!=&#39;&#39;:</div>
<div class="line">            params[tag] = str(temp)   </div>
<div class="line"> </div>
<div class="line">        # Parameter information - my_new_grid</div>
<div class="line">        print(&#39;&#39;)</div>
<div class="line">        print(&#39;Quantity of interest &quot;my_new_grid&quot; is also very cool.&#39;)</div>
<div class="line">        print(&#39;&#39;)</div>
<div class="line"> </div>
<div class="line">        # Check if user wants defaults</div>
<div class="line">        tag = &#39;my_new_grid&#39;</div>
<div class="line">        use_def = query_default(tag, d_my_new_grid_problem)</div>
<div class="line"> </div>
<div class="line">        # If not defaults, query grid</div>
<div class="line">        if use_def == &#39;n&#39;:</div>
<div class="line">            mini, maxi, num = query_grid(tag)</div>
<div class="line">            params[tag] = &#39;{:}, {:}, {:}&#39;.format(mini, maxi, num)</div>
</div><!-- fragment --><h4><code><a class="el" href="namespace_dice_py_1_1dice__inputs.html" title="Contains main routine that handles the input file params.txt for Dice.">DicePy.dice_inputs</a></code></h4>
<p>This module just contains the <code><a class="el" href="namespacerepo_1_1_dice_py_1_1dice__inputs.html#a4fdc3c6a540c2c6125999f3e8a5d3020" title="Enquires whether the user would like to write a new params.txt file, or check an existing params....">dice_inputs()</a></code> function, which is simply a caller for the other modules. No extra work should be needed here.</p>
<hr  />
<h3>Visualisation</h3>
<p>DicePy reads in results using the <code><a class="el" href="namespace_dice_py_1_1dice__visualise.html" title="Contains functions for burning/thinning and visualization for Dice.">DicePy.dice_visualise</a></code> module, and is able to visualise the results generated by the main program. Writing additional visualisation options for different problems can be by simply adding a function to plot the positions sampled by the Markov chain, and a function which plots the energies and their uncertainties against the variational parameter.</p>
<p>For example, for the QHO problem:</p><ul>
<li><code><a class="el" href="namespacerepo_1_1_dice_py_1_1dice__visualise.html#a184191d6821b187301ed1d7f608282fc" title="Energy against  plotter for the QHO problem.">QHOEnergyPlot()</a></code> reads <code>results_file</code> and plots the energies against variational alpha values specified in the problem, as well as the uncertainties in the energies. The sliceby option allows one to plot only a section of the graph by typing the indices of the slice you are interested in.</li>
<li><code><a class="el" href="namespacerepo_1_1_dice_py_1_1dice__visualise.html#a5136a368d1b2ba8373ec139b615d9aba" title="Scatter plotter of the sampled QHO wavefunction.">QHOWfnPlot()</a></code> reads a file containing the Markov chains and plots the distribution of the QHO wave functions, also showing the energies of these positions as well. It can also plots an analytical solution for the wave function as well, if desired.</li>
</ul>
<p>Plots may want to take advantage of the <code>plotly</code> or <code>matplotlib</code> libraries which have been used for the other functions in the module, but users can also decide to use other libraries as well when writing these functions.</p>
<p>This documentation was generated from commit fd44488 </p>
</div></div><!-- PageDoc -->
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
